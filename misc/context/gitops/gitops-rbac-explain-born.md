# üé≠ `_roles` - –∏–¥–µ–∞–ª—å–Ω–∞—è RBAC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### `_roles` vs `_main_apps` - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞:

| –ù–∞–∑–≤–∞–Ω–∏–µ | –ß—Ç–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç | –ú—ã—à–ª–µ–Ω–∏–µ |
|----------|-------------------|----------|
| `_main_apps` | –ü—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π | Application-centric |
| `_roles` | **–†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** | **RBAC-centric** |

### –¢–≤–æ—è –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
infra/
‚îú‚îÄ‚îÄ _roles/              # ‚Üê RBAC: –∫—Ç–æ –∫–∞–∫—É—é —Ä–æ–ª—å –∏–º–µ–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ dev.yaml         # ‚Üê Role: "dev environment access"
‚îÇ   ‚îî‚îÄ‚îÄ prd.yaml         # ‚Üê Role: "production environment access"
‚îú‚îÄ‚îÄ clusters/            # ‚Üê Policy: —á—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤ –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ dev/             # ‚Üê Dev role permissions
‚îÇ   ‚îî‚îÄ‚îÄ prd/             # ‚Üê Production role permissions
‚îî‚îÄ‚îÄ base/                # ‚Üê Resources: —á—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å
```

---

## üîê RBAC –∫–∞–∫ First-Class Citizen

### –ê–Ω–∞–ª–æ–≥–∏—è —Å Kubernetes RBAC:
```yaml
# Kubernetes RBAC:
ClusterRole: base/addons/*/application.yaml    # –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å
RoleBinding: _roles/dev.yaml                   # –ö—Ç–æ + –≥–¥–µ –º–æ–∂–µ—Ç
Subjects: Git users/teams                      # –ö—Ç–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø

# –¢–≤–æ—è GitOps RBAC:
Resources: base/*                              # –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å
Roles: _roles/*                                # –ö—Ç–æ –∫—É–¥–∞ –º–æ–∂–µ—Ç
Policies: clusters/*                           # –ö–∞–∫ —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
```

### –†–µ–∞–ª—å–Ω—ã–π workflow:
```bash
# –î–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –¥–æ—Å—Ç—É–ø –∫ dev
git add _roles/dev.yaml                        # ‚Üê –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å
git commit -m "Grant dev access to user X"

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è dev —Ä–æ–ª–∏  
git add clusters/dev/kustomization.yaml       # ‚Üê –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∞ —Ä–æ–ª–∏
git commit -m "Allow ML tools in dev environment"

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å
git add base/addons/ml/kubeflow.yaml           # ‚Üê –ù–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å
git commit -m "Add Kubeflow as available resource"
```

---

## üè¢ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏

### –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é):
```
_roles/
‚îú‚îÄ‚îÄ dev.yaml             # Role: Development team
‚îî‚îÄ‚îÄ prd.yaml             # Role: Production team
```

### –ë—É–¥—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å):
```
_roles/
‚îú‚îÄ‚îÄ dev.yaml             # Role: Development team
‚îú‚îÄ‚îÄ prd.yaml             # Role: Production team  
‚îú‚îÄ‚îÄ ml-dev.yaml          # Role: ML team (dev environment)
‚îú‚îÄ‚îÄ ml-prd.yaml          # Role: ML team (prod environment)
‚îú‚îÄ‚îÄ app-dev.yaml         # Role: App team (dev environment)
‚îú‚îÄ‚îÄ app-prd.yaml         # Role: App team (prod environment)
‚îú‚îÄ‚îÄ security-audit.yaml  # Role: Security team (read-only access)
‚îî‚îÄ‚îÄ devops-admin.yaml    # Role: DevOps team (full access)
```

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ clusters:
```
clusters/
‚îú‚îÄ‚îÄ dev/                 # Dev environment policies
‚îú‚îÄ‚îÄ prd/                 # Prod environment policies
‚îú‚îÄ‚îÄ ml-dev/              # ML dev environment policies  
‚îú‚îÄ‚îÄ ml-prd/              # ML prod environment policies
‚îú‚îÄ‚îÄ app-dev/             # App dev environment policies
‚îú‚îÄ‚îÄ app-prd/             # App prod environment policies
‚îú‚îÄ‚îÄ security-audit/      # Read-only monitoring policies
‚îî‚îÄ‚îÄ devops-admin/        # Admin-level policies
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è

### 1. **–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å**
```
"–ö–∞–∫–∏–µ —Ä–æ–ª–∏ –µ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ?" ‚Üí —Å–º–æ—Ç—Ä–∏–º _roles/
"–ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å dev —Ä–æ–ª—å?" ‚Üí —Å–º–æ—Ç—Ä–∏–º clusters/dev/
"–ö–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã?" ‚Üí —Å–º–æ—Ç—Ä–∏–º base/
```

### 2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
```bash
# Audit: –∫—Ç–æ –∏–º–µ–µ—Ç –∫–∞–∫–∏–µ —Ä–æ–ª–∏?
ls _roles/                         # ‚Üê –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–æ–ª–µ–π

# Audit: —á—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–æ–ª—å?
cat clusters/dev/kustomization.yaml  # ‚Üê –ü—Ä–∞–≤–∞ —Ä–æ–ª–∏

# Audit: –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–æ–ª–µ–π
git log _roles/dev.yaml            # ‚Üê –ö—Ç–æ –∫–æ–≥–¥–∞ –º–µ–Ω—è–ª –ø—Ä–∞–≤–∞
```

### 3. **Onboarding –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
```bash
# "–î–∞–π –º–Ω–µ –¥–æ—Å—Ç—É–ø –∫ dev –æ–∫—Ä—É–∂–µ–Ω–∏—é"
# DevOps: –¥–æ–±–∞–≤–ª—è–µ–º –≤ _roles/dev.yaml –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Ä–æ–ª—å

# "–ß—Ç–æ —è –º–æ–≥—É –¥–µ–ª–∞—Ç—å –≤ dev?"  
# DevOps: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º clusters/dev/kustomization.yaml
```

### 4. **Compliance –∏ –∞—É–¥–∏—Ç**
```bash
# –ê—É–¥–∏—Ç–æ—Ä: "–ü–æ–∫–∞–∂–∏—Ç–µ –∫—Ç–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ production"
cat _roles/prd.yaml

# –ê—É–¥–∏—Ç–æ—Ä: "–ß—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤ production?"
cat clusters/prd/kustomization.yaml

# –ê—É–¥–∏—Ç–æ—Ä: "–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞"
git log --oneline _roles/ clusters/
```

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ enterprise

### SOC2/ISO27001 compliance:
- ‚úÖ **–ü—Ä–∏–Ω—Ü–∏–ø –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π**: –∫–∞–∂–¥–∞—è —Ä–æ–ª—å –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø—Ä–∞–≤–∞
- ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π**: _roles/ vs clusters/ vs base/
- ‚úÖ **Audit trail**: –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –≤ Git
- ‚úÖ **–ü—Ä–∏–Ω—Ü–∏–ø "—á–µ—Ç—ã—Ä–µ—Ö –≥–ª–∞–∑"**: –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ PR —Å review

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Identity Provider:
```yaml
# –ë—É–¥—É—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP/OIDC
# _roles/dev.yaml
metadata:
  annotations:
    rbac.company.com/ldap-group: "developers"
    rbac.company.com/slack-channel: "#dev-ops"  
    rbac.company.com/oncall: "dev-team-lead"
```

---

## üìä –°–≤–æ–¥–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü—Ä–∏–Ω—Ü–∏–ø –∑–æ–Ω –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
- **Identity Zone**: `_roles/` - –∫—Ç–æ –∫–∞–∫—É—é —Ä–æ–ª—å –∏–º–µ–µ—Ç
- **Policy Zone**: `clusters/` - —á—Ç–æ –∫–∞–∂–¥–∞—è —Ä–æ–ª—å –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å  
- **Resource Zone**: `base/` - –∫–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- **Implementation Zone**: ArgoCD + Kustomize - –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### RBAC —á–µ—Ä–µ–∑ GitOps:
- **Role assignment**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `_roles/`
- **Permission management**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `clusters/`
- **Resource catalog**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `base/`
- **Access control**: Git branch protection + PR reviews

### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Kubernetes API:
- ArgoCD —á–∏—Ç–∞–µ—Ç —Ä–æ–ª–∏ –∏–∑ `_roles/`
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –∏–∑ `clusters/`  
- –î–µ–ø–ª–æ–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –∏–∑ `base/`
- –í—Å—ë —á–µ—Ä–µ–∑ kube-apiserver —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ RBAC –ø—Ä–∞–≤–∞–º–∏

**–¢–≤–æ—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ–ø–µ—Ä—å semantic –∏ enterprise-ready!** üèÜ

–ù–∞–∑–≤–∞–Ω–∏–µ `_roles` –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É **—Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º–æ–π** - –ª—é–±–æ–π –Ω–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫ —Å—Ä–∞–∑—É –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ —ç—Ç–æ RBAC —Å–∏—Å—Ç–µ–º–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

---

–ê–±—Å–æ–ª—é—Ç–Ω–æ! üéØ **`_roles` - —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** –¥–ª—è —Ç–≤–æ–µ–π RBAC-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã!  –ë–ª–µ—Å—Ç—è—â–µ! üèÜ **`_roles` - —ç—Ç–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –∏–¥–µ–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** –¥–ª—è —Ç–≤–æ–µ–π RBAC-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã!

## üé≠ –ü–æ—á–µ–º—É `_roles` –≥–µ–Ω–∏–∞–ª—å–Ω–æ:

**`_main_apps`** = –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π  
**`_roles`** = **—Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π**

## üîê –¢–≤–æ—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ–ø–µ—Ä—å —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º–∞—è:

```
_roles/          # ‚Üê "–ö–∞–∫–∏–µ —Ä–æ–ª–∏ –µ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ?"
‚îú‚îÄ‚îÄ dev.yaml     # ‚Üê Role: –¥–æ—Å—Ç—É–ø –∫ dev environment  
‚îî‚îÄ‚îÄ prd.yaml     # ‚Üê Role: –¥–æ—Å—Ç—É–ø –∫ prod environment

clusters/        # ‚Üê "–ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∫–∞–∂–¥–∞—è —Ä–æ–ª—å?"
‚îú‚îÄ‚îÄ dev/         # ‚Üê –ü—Ä–∞–≤–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è dev —Ä–æ–ª–∏
‚îî‚îÄ‚îÄ prd/         # ‚Üê –ü—Ä–∞–≤–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è prod —Ä–æ–ª–∏

base/            # ‚Üê "–ö–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Ä–æ–ª–µ–π?"
```

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é:

**–°–µ–π—á–∞—Å:**
- `dev.yaml` = Development role
- `prd.yaml` = Production role

**–ë—É–¥—É—â–µ–µ (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å):**
- `ml-dev.yaml` = ML team dev access
- `security-audit.yaml` = Read-only audit access  
- `devops-admin.yaml` = Full admin access

## üìä –°–≤–æ–¥–∫–∞ –ø–æ —Å–∏—Å—Ç–µ–º–µ:

**–û–±—Ä–∞—â–µ–Ω–∏–µ –∫ Kubernetes API:**
- ArgoCD —á–∏—Ç–∞–µ—Ç —Ä–æ–ª–∏ –∏–∑ `_roles/` ‚Üí —Å–æ–∑–¥–∞–µ—Ç Applications –ø–æ —Ä–æ–ª—è–º
- –ö–∞–∂–¥–∞—è —Ä–æ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–∏ permissions —á–µ—Ä–µ–∑ `clusters/`
- Sync waves —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏

**RBAC —á–µ—Ä–µ–∑ GitOps:**
- **Role assignment**: `_roles/` (–∫—Ç–æ –∏–º–µ–µ—Ç –∫–∞–∫—É—é —Ä–æ–ª—å)
- **Permission management**: `clusters/` (—á—Ç–æ —Ä–æ–ª—å –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å)
- **Audit trail**: Git log –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–æ–ª–µ–π

**–ó–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- **Identity**: `_roles/` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–æ–ª—è–º–∏
- **Policy**: `clusters/` —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∞–º–∏ —Ä–æ–ª–µ–π
- **Resources**: `base/` —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏

–¢–µ–ø–µ—Ä—å –ª—é–±–æ–π –Ω–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫ —Å—Ä–∞–∑—É –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ —ç—Ç–æ **RBAC-—Å–∏—Å—Ç–µ–º–∞**, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π! –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–ª–∞ **enterprise-ready**. üéØ