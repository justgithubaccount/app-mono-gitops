##  tasks

### basis
- [x] [инфра] Настройить нджикc ингресс, серт менеджер, вэбки арго в паблик  
- [x] [инфра] Через external dns автомазировать работу с клаудфлейр по части днс | Манифестов добавить  
- [x] [инфра] Отладить хелм релиз для чат-апи | обернуть в апп-фор-аппс  
- [x] [код] отладить базовый функционал чата (пройти смок паблик тест) | стейт перенести в постгрее  
### sec
- [x] Добавить протект на майн-ветку | [проверить работу](https://github.com/justgithubaccount/app-release/actions/runs/16650220134/job/47120671590)
- [ ] ...  
### code
- [x] Убрать LiteLLM и сделать отдельный сервис, который будет напрямую ходить к OpenRouter
- [ ] Написать свой контролер | описываем схему через CRD | все в сути класс на го | все есть обьект | что сверху апишка, что снизу она же   
### infra 
- [ ] Отладить getting-started | сменить кластер  
- [ ] [запустить два+ кластера](https://github.com/justgithubaccount/app-release/blob/main/scripts/multi-cluster.yaml)  
- [ ] применить паттерн от Арго - ApplicationSet  
### ci
- [x] Добаваить тестов на предмет хелм рендеринда конфигов | добавить opa политики  
- [x] Добавить [семантическое версионирование](https://semver.org/lang/ru/) + git-теги + хелм-релиз-логика
  - [x] Добавить argocd-image-updater 
    - [ ] Доотладить argocd-image-updater так чтобы была согласованность между хелм-релизом и chat-values.yaml | [чтобы не перезаписывал файл](https://github.com/justgithubaccount/app-release/commit/8b5a4f709fe0aea9d897e42d968a7ca41f03a659) и все было логично и прозрачно
  - [ ] [High] Тестить сборку релиза перед мерджем, в самом pr  
  - [x] сonventional сommits | всё в .releaserc.json | встроить флоу для гита  
### mesh
- [ ] Добавить сервис по анализу [инцидентов](https://github.com/justgithubaccount/app-release/issues/5)
- [ ] Продумать концепцию нейминга как под saas сервис
- [ ] Добавить прозрачность работы с env:
  - [x] ~~Интегрировать Consul~~ + external-secrets | консул не нужен | добавить плагин из экосистемы арго чтобы бегал в vault | external secret до облаков
  - [ ] Прикрутить service mesh. Линкерд или Истио | Линкерд у меня тут не 1kk RPS | консул был нужен как mesh, но лучше отдельный линкерд
  - [ ] Обеспечить возможность править env на лету (например, через SIGHUP или альтернативный механизм) | холиварный вопрос на счет таких подходов
  - [ ] Определить сервисы через Service + Endpoints [?]
  - [ ] [mesh] Создать отдельный сервис через cdktf, чтобы инфра сама себя воспроизводила (всм как бы добавить терраформа, но через питон) 
### obs
  - [ ] отдать в локи, лог смены версии kubectl -n argocd logs -l app.kubernetes.io/name=argocd-image-updater --tail=200