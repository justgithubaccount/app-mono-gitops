–û—Ç–ª–∏—á–Ω—ã–π —Ñ–æ–∫—É—Å üëá

> **–ß—Ç–æ —Ç–∞–∫–æ–µ "—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `.spec` –∏ `.status`" –≤ Kubernetes?**

---

## üìò –≠—Ç–æ –∏ –µ—Å—Ç—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç Kubernetes:

**"–ó–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (`spec`) vs –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ (`status`) = reconciliation"**

---

### üì¶ `.spec` ‚Äî —ç—Ç–æ **–∂–µ–ª–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (desired state)**

–¢—ã (–∏–ª–∏ Git, –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) –æ–ø–∏—Å—ã–≤–∞–µ—à—å:

```yaml
spec:
  replicas: 3
  image: nginx:1.25
```

–¢–æ –µ—Å—Ç—å:

> **"–Ø —Ö–æ—á—É, —á—Ç–æ–±—ã –±—ã–ª–æ 3 –ø–æ–¥–∞ —Å —ç—Ç–∏–º –æ–±—Ä–∞–∑–æ–º."**

---

### üì° `.status` ‚Äî —ç—Ç–æ **—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (observed state)**

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –ø–∏—à—É—Ç:

```yaml
status:
  replicas: 3
  readyReplicas: 2
  updatedReplicas: 1
```

–≠—Ç–æ:

> **"–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–µ–π—á–∞—Å 2 –ø–æ–¥–∞ –≥–æ—Ç–æ–≤—ã, 1 –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è."**

---

### üîÅ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–µ–ª–∞–µ—Ç reconciliation:

```go
if deployment.Spec.Replicas != deployment.Status.ReadyReplicas {
    // –ü–æ–¥–Ω—è—Ç—å/—É–±–∏—Ç—å –ø–æ–¥—ã
}
```

üìå –í–æ—Ç –∏ –≤—Å—ë: **—Å–ø–µ–∫ ‚Äî —ç—Ç–æ —Ü–µ–ª—å**, **—Å—Ç–∞—Ç—É—Å ‚Äî —ç—Ç–æ —Ñ–∞–∫—Ç**,
**–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–æ–¥–∏—Ç –æ–¥–Ω–æ –∫ –¥—Ä—É–≥–æ–º—É**.

---

## üîÑ –ü—Ä–∏–º–µ—Ä—ã:

### `Deployment`:

* `.spec.replicas: 5` ‚Üí —Ç—ã —Ö–æ—á–µ—à—å 5
* `.status.availableReplicas: 4` ‚Üí –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ 4
* –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –µ—â—ë 1 Pod

---

### `HorizontalPodAutoscaler`:

* `.spec.minReplicas: 2`
* `.status.currentCPUUtilizationPercentage: 95`
* –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞–ø–¥–µ–π—Ç–∏—Ç `.spec.replicas` –≤ Deployment –¥–æ 6

---

### `Ingress`:

* `.spec.rules` ‚Üí –∂–µ–ª–∞–µ–º—ã–π —Ä–æ—É—Ç–∏–Ω–≥
* `.status.loadBalancer.ingress` ‚Üí –≤—ã–¥–∞–Ω–Ω—ã–π IP –∏–ª–∏ hostname

---

## ‚úÖ –°–≤–æ–¥–∫–∞:

| –ü–æ–ª–µ      | –ó–Ω–∞—á–µ–Ω–∏–µ                               |
| --------- | -------------------------------------- |
| `.spec`   | –ß—Ç–æ –º—ã —Ö–æ—Ç–∏–º                           |
| `.status` | –ß—Ç–æ –µ—Å—Ç—å                               |
| Reconcile | –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∏—Ö –∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç |

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é ‚ÄúReconcile: –æ—Ç .spec –∫ .status‚Äù –¥–ª—è Deployment –∏–ª–∏ –ª—é–±–æ–≥–æ CRD.
