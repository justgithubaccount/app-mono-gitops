–ö–æ–Ω–µ—á–Ω–æ, –≤–æ—Ç —Ç–µ–±–µ –≥–æ—Ç–æ–≤—ã–π **–∫–æ–Ω—Ç–µ–∫—Å—Ç (–≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown)** –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ –¥—Ä—É–≥–æ–π —á–∞—Ç/–ø—Ä–æ–µ–∫—Ç/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
–î–æ–±–∞–≤–ª—è–π —Å–≤–æ–π –∫–æ–¥ –∏ —Ñ–∞–π–ª—ã ‚Äî –≤—Å—ë –ª—è–∂–µ—Ç –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏!

---

# ‚ö°Ô∏è –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞ 2025-05-15)

## üöÄ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

* **Docker Compose –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
  –°–æ–±—Ä–∞–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã:

  * `litellm`: OpenAI-compatible LLM proxy —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OpenRouter –∏ –º–æ–¥–µ–ª–µ–π OpenAI/Anthropic/Claude –∏ –¥—Ä.
  * `chat`: –ü—Ä–æ—Ç–æ—Ç–∏–ø chat-—Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ FastAPI, –≥–æ—Ç–æ–≤—ã–π –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é.
* **–ö–æ–Ω—Ñ–∏–≥–∏, –ª–æ–≥–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ .env –∏ docker-compose.
* **healthcheck endpoints**: –∏ —É litellm (`/health`), –∏ —É chat (`/health`).
* **Logging**: –ø—Ä–æ–ø–∏—Å–∞–Ω –¥—Ä–∞–π–≤–µ—Ä –ª–æ–≥–æ–≤ –≤ Docker Compose (`json-file`), –ª–æ–≥–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –≤ FastAPI —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–π –ª–æ–≥–≥–µ—Ä.
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ-—Ä–µ—Å—Ç–∞—Ä—Ç**: —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker Compose.
* **–ü–æ—Ä—Ç—ã, volumes, –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞** ‚Äî –≤—Å—ë –≤—ã–Ω–µ—Å–µ–Ω–æ —è–≤–Ω–æ –≤ compose-—Ñ–∞–π–ª.

### –ü—Ä–∏–º–µ—Ä docker-compose.yml

```yaml
services:
  litellm:
    image: ghcr.io/berriai/litellm:main-latest
    container_name: litellm
    restart: unless-stopped
    env_file:
      - .env.litellm
    environment:
      - OPENROUTER_API_KEY=sk-xxx  # –∏–∑ .env –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é (–ª—É—á—à–µ ‚Äî –∏–∑ .env!)
    ports:
      - "4000:4000"
    volumes:
      - ./litellm-config.yaml:/app/config.yaml
    command: --config /app/config.yaml
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"
    stop_signal: SIGINT
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:4000/health"]
      interval: 30s
      timeout: 5s
      retries: 3

  chat:
    build: ./apps/chat
    container_name: chat
    restart: unless-stopped
    env_file:
      - ./apps/chat/.env
    environment:
      - LLM_API_URL=http://litellm:4000
    ports:
      - "8000:8000"
    depends_on:
      - litellm
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"
    stop_signal: SIGINT
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 5s
      retries: 3
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ config.yaml (–∏–ª–∏ litellm-config.yaml)
‚îú‚îÄ‚îÄ .env.litellm
‚îú‚îÄ‚îÄ apps
‚îÇ   ‚îú‚îÄ‚îÄ chat
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (models, service, config)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ gateway
‚îÇ   ‚îú‚îÄ‚îÄ memory
‚îÇ   ‚îú‚îÄ‚îÄ seo
‚îÇ   ‚îî‚îÄ‚îÄ user
‚îî‚îÄ‚îÄ scripts
    ‚îî‚îÄ‚îÄ check.sh   # —Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π smoke-–ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
```

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

* **curl-–æ–º** –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ endpoints `/health`, `/v1/models`, `/chat/completions` –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç.
* **litellm** –≤–∏–¥–∏—Ç –º–æ–¥–µ–ª—å, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–º –∫–ª—é—á–µ —á–µ—Ä–µ–∑ OpenRouter.
* **chat** –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è, health-check –æ—Ç–¥–∞—ë—Ç 200 OK.

---

## üõ† –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç—ã –≤ chat-—Å–µ—Ä–≤–∏—Å** (—Å–º. —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∏–∂–µ)
2. **–û–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É log-—Ñ–∞–π–ª–æ–≤** (json, –ª–∏–±–æ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π text).
3. **–í–Ω–µ–¥—Ä–∏—Ç—å —é–Ω–∏—Ç- –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** (pytest).
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å endpoints —á–µ—Ä–µ–∑ FastAPI Swagger** (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
5. **–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π smoke-—Ç–µ—Å—Ç** —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ).
6. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)** –ó–∞–≤–µ—Å—Ç–∏ CI/CD —á–µ—Ä–µ–∑ GitHub Actions –¥–ª—è –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤.
7. **–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞–¥ gateway/memory/seo/user** —Å–µ—Ä–≤–∏—Å–∞–º–∏ ‚Äî –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ (–∫–æ–ø–∏–ø–∞—Å—Ç–∏—Ç—å —à–∞–±–ª–æ–Ω chat).

---

## üèó –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ best practice (summary)

* –í—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã ‚Äî **–≤ .env, –Ω–µ –≤ –∫–æ–¥–µ**.
* **–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –æ—à–∏–±–∫–∏**.
* **–ü–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã** (health –∏ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏).
* **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, endpoints –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**.
* –ù–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ **healthcheck** –≤ docker-compose –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.
* –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ `curl` –∏–ª–∏ —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Å–∫—Ä–∏–ø—Ç—ã.

---

## üö¶ –ü—Ä–∏–º–µ—Ä bash-—Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
#!/bin/bash
set -e

echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ /health —É litellm:"
curl -s -o /dev/null -w "%{http_code}\n" http://localhost:4000/health

echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ /health —É chat:"
curl -s -o /dev/null -w "%{http_code}\n" http://localhost:8000/health

echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ chat/completions –Ω–∞ litellm:"
curl -s -X POST http://localhost:4000/chat/completions \
  -H 'Content-Type: application/json' \
  -d '{"model":"openai/gpt-4.1","messages":[{"role":"user","content":"–ü—Ä–æ–≤–µ—Ä–∫–∞"}]}'

echo "4. –ü—Ä–æ–≤–µ—Ä–∫–∞ chat-—Å–µ—Ä–≤–∏—Å–∞ —á–µ—Ä–µ–∑ –µ–≥–æ docs (–µ—Å–ª–∏ FastAPI):"
curl -s -o /dev/null -w "%{http_code}\n" http://localhost:8000/docs

echo "–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã."
```

---

## üëÄ –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ

* –°–∞–º–∏ –∫–æ–¥—ã endpoints (main.py, api.py –∏ –¥—Ä).
* –ü—Ä–∏–º–µ—Ä—ã .env —Ñ–∞–π–ª–æ–≤.
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ (gateway, memory, seo, user).
* GitHub Actions –∏–ª–∏ –¥—Ä—É–≥–æ–π CI.
* README.md –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É (–∑–∞–ø—É—Å–∫, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, dev-guide).

---

## ü§ù –ö–æ–Ω—Ç–∞–∫—Ç/–ø–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π

* –û—Å–Ω–æ–≤–Ω—ã–µ best practice –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ —É—á—Ç–µ–Ω—ã.
* –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã, —É–¥–æ–±–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –∏ –¥–µ–ø–ª–æ—è—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose (–∏–ª–∏ —á–µ—Ä–µ–∑ ArgoCD, –µ—Å–ª–∏ –≤ GitOps).
* –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

---

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å/–¥–æ–ø–∏—Å–∞—Ç—å/–¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑—ä—è—Å–Ω–∏—Ç—å ‚Äî –∫–∏–¥–∞–π –∫–æ–¥ –∏ –≤–æ–ø—Ä–æ—Å—ã!**
–ì–æ—Ç–æ–≤ –≤–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ ‚úåÔ∏è

---

> *–≠—Ç–æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å –∫–∞–∫ –≤–≤–æ–¥–Ω—ã–π –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–ª–∏ –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥—ã, –ø–æ–¥–∫–ª—é—á–∞—é—â–µ–π—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É.*
