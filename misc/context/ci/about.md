**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑**, —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è GitOps –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–ø—Ä–∞–∫—Ç–∏–∫:

---

## üß† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–≤–æ–π CI: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–≤–æ–¥–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è                | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                         | GitOps —Ñ—É–Ω–∫—Ü–∏—è                                        | –ü—Ä–æ–¥–∞–∫—à–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                    |
| ------------------------ | -------------------------------------------------- | ----------------------------------------------------- | ---------------------------------------- |
| üß™ **Validation CI**     | –õ–∏–Ω—Ç, —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è Helm, `kubeconform`, OPA policy | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ shift-left           |
| üêç **App Tests**         | –¢–µ—Å—Ç—ã –Ω–∞ `pytest`, `mypy`, `ruff`                  | –Æ–Ω–∏—Ç- –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞                                | ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ              |
| üöÄ **Release CI**        | Semantic-release ‚Üí —Ç–µ–≥ ‚Üí Docker ‚Üí GHCR push        | –û–±—Ä–∞–∑—ã —Å –≤–µ—Ä—Å–∏–µ–π –ø–æ–ø–∞–¥–∞—é—Ç –≤ registry                  | ‚úÖ –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Argo Image Updater |
| üîê **Branch Protection** | Terraform —É–ø—Ä–∞–≤–ª—è–µ—Ç GitHub –≤–µ—Ç–∫–∞–º–∏                 | GitOps –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞                               | ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∫–∞–∫ –∫–æ–¥     |

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å Argo CD –∏ Image Updater

–í–æ—Ç –ø–æ–ª–Ω—ã–π GitOps-–ø–æ—Ç–æ–∫:

```
Code push (PR) ‚Üí
  üîπ CI: Lint + Helm Render + Kubeconform + OPA ‚Üí
    ‚úÖ PR Passed ‚Üí
    ‚úÖ Merge to main ‚Üí
      üî∏ CI: Semantic-release ‚Üí Docker Image (v1.0.X) ‚Üí
        üî∏ Push –≤ GHCR ‚Üí
          üî∏ Argo Image Updater –≤–∏–¥–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é ‚Üí
            üî∏ –ö–æ–º–º–∏—Ç–∏—Ç –≤ values.yaml (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∞) ‚Üí
              üî∏ Argo CD Application –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí
                üî∏ Sync ‚Üí Deploy –≤ –∫–ª–∞—Å—Ç–µ—Ä
```

---

## ‚öôÔ∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è

| –û–±–ª–∞—Å—Ç—å                 | –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å                                     | –ü–æ—á–µ–º—É                                                               |
| ----------------------- | ------------------------------------------------------ | -------------------------------------------------------------------- |
| ‚úÖ Semantic release      | ‚úÖ –û—Ç–ª–∏—á–Ω–æ, —Å–æ–∑–¥–∞—ë—Ç –æ–±—Ä–∞–∑—ã —Å —Ç–µ–≥–∞–º–∏ –∏ latest            | ‚Äî                                                                    |
| ‚úÖ Kubeconform + OPA     | –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ! Shift-left –≤–∞–ª–∏–¥–∞—Ü–∏—è                     | ‚Äî                                                                    |
| üõ†Ô∏è –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã CI        | –°–µ–π—á–∞—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 1 —Ñ–∞–π–ª `rendered.yaml`       | –ú–æ–∂–µ—à—å –µ—â—ë —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `.version`, `.image-tag` –∏ `policy-results.txt` |
| ‚ö†Ô∏è Secrets –≤ Argo       | –ù–µ –≤–∏–¥–Ω–æ –≤ CI –ª–æ–≥–∏–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SealedSecrets           | –î–æ–±–∞–≤–∏—Ç—å `kubeseal` –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤               |
| ‚ö†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥           | –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤ –Ω–∞ CI —Ñ–µ–π–ª—ã / Docker release / sync ArgoCD | –ú–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å GitHub ‚Üí Alertmanager –∏–ª–∏ Telegram —á–µ—Ä–µ–∑ webhook |
| üöÄ Progressive delivery | –ü–æ–∫–∞ —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π sync —á–µ—Ä–µ–∑ ArgoCD              | –ú–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å `Argo Rollouts` –¥–ª—è Blue/Green –∏ Canary              |

---

## üìÅ –°–æ–≤–µ—Ç—ã –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º

> **Q:** ‚Äú–ó–Ω–∞—á–µ–Ω–∏—è –≥–¥–µ –ª—É—á—à–µ —Ç–∞—â–∏—Ç—å?‚Äù

* Helm ‚Üí —á–µ—Ä–µ–∑ `valueFiles` (dev, prd, ...).
* CI ‚Üí –≤—Å–µ–≥–¥–∞ –±—Ä–∞—Ç—å `values.yaml` + `${{ matrix.env }}-values.yaml`
* Argo Image Updater ‚Üí —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ—á–Ω—ã–π `helm.image-tag` –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: `chat.image.tag` –∏–ª–∏ `image.tag`, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

---

## üîó –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ–º–º–∏—Ç–∞ –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞

```mermaid
graph TD
  A[GitHub PR] --> B[CI Validation: Helm, OPA, Kubeconform]
  B --> C{PR Approved}
  C --> D[Merge to main]
  D --> E[Semantic Release: Version bump]
  E --> F[Docker Build & Push to GHCR]
  F --> G[ArgoCD Image Updater finds new tag]
  G --> H[Git commit to values.yaml]
  H --> I[ArgoCD Sync ‚Üí Helm Release]
  I --> J[Updated Pod in Cluster]
```

---

–•–æ—á–µ—à—å, —è –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é —Ç–µ–±–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç `ApplicationSet` –∏–ª–∏ `.argocd-image-updater-config.yaml`, —á—Ç–æ–±—ã –æ–Ω —Ç–æ—á–Ω–æ –∫–æ–º–º–∏—Ç–∏–ª –≤ –Ω—É–∂–Ω—ã–µ overlay-—Ñ–∞–π–ª—ã (`infra/clusters/dev/chat-values.yaml` –∏ —Ç.–ø.) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥?
